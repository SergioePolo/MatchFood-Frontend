<main>

  <form [formGroup]="loginForm" (ngSubmit)="handleSubmit()">
    <section class="formAcceso">
      <div class="imagenDelForm">
        <img src="assets/main_Resources/logo-matchfood.png" alt="Logo MatchFood">
      </div>

      <div class="form-title">
        <h2>Inicia sesión con tu cuenta</h2>
      </div>
      @if (errorMessage()) {
      <div class="error-alert">
        {{ errorMessage() }}
      </div>
      }
      <form [formGroup]="loginForm" (ngSubmit)="handleSubmit()">
        <div class="form-group">
          <p>Ingresa tu email:</p>
          <input type="email" id="email" placeholder="tu@email.com" formControlName="email" autocomplete="email"
            [class.is-invalid]="loginForm.get('email')?.invalid">
          @if (email?.invalid && email?.touched) {
          <span class="error-message">
            @if (email?.errors?.['required']) {
            El email es requerido
            }
            @if (email?.errors?.['email']) {
            Ingresa un email válido
            }
          </span>
          }
        </div>

        <div class="form-group">
          <p>Ingresa tu contraseña:</p>
          <input type="password" id="password" placeholder="Tu contraseña" formControlName="password"
            autocomplete="password" [class.is-invalid]="loginForm.get('password')?.invalid">
          @if (password?.invalid && password?.touched) {
          <span class="error-message">
            @if (password?.errors?.['required']) {
            La contraseña es requerida
            }
            @if (password?.errors?.['minlength']) {
            La contraseña debe tener al menos 6 caracteres
            }
          </span>
          }
        </div>

        <div class="form-group">

          <p>Selecciona tú rol:</p>
          <select id="role" formControlName="role">
            <option value="" disabled selected>Tú rol</option>
            <option value="user">Usuario</option>
            <option value="restaurant">Restaurante</option>
            <p>Selecciona tu rol:</p>
          </select>
          @if (role?.invalid && role?.touched) {
          <span class="error-message">
            Debes seleccionar un rol
          </span>
          }
        </div>

        <button type="submit" class="login-button" [disabled]="isLoading()">
          @if (isLoading()) {
          Iniciando sesión...
          } @else {
          Ingresa a MatchFood
          }
        </button>
      </form>

      <div class="register-link">
        <a routerLink="**">¿Olvidaste tu contraseña?</a>
        <p>¿No tienes cuenta? <a routerLink="/crear-usuario"><strong>Regístrate aquí</strong></a></p>
      </div>
    </section>
  </form>
</main>